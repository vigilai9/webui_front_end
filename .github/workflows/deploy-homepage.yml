name: Deploy to cPanel

on:
  push:
    branches: [ home_page ] # or your production branch

jobs:
  build-and-deploy:
    runs-on: ubuntu-latest

    steps:
    - uses: actions/checkout@v3

    - name: Set up Node.js
      uses: actions/setup-node@v3
      with:
        node-version: '18' # or your preferred version

    - name: Install dependencies
      run: npm install

    - name: Install dependencies
      run: npm install

    - name: Build project
      run: npm run build

    - name: Zip build output
      run: |
        cd out # or your build output directory
        zip -r ../out.zip .

    - name: Upload to cPanel via SCP
      run: |
        sudo apt-get update && sudo apt-get install -y sshpass
        sshpass -p Gaurav123# ssh -o StrictHostKeyChecking=no iqfu27x9dob7@s3cura.com "mkdir -p public_html/home_page"
        sshpass -p Gaurav123# scp -o StrictHostKeyChecking=no -P 22 out.zip iqfu27x9dob7@s3cura.com:public_html/home_page/out.zip
